<html>
  <script>
  var sunglasses_opacity = 0.2;

  chrome.tabs.onSelectionChanged.addListener(function(tabId, selectInfo) {
    console.log("sunglasses_opacity changed");
    chrome.tabs.sendRequest(tabId, {tab_sunglasses_opacity: sunglasses_opacity}, function(response) {
      console.log(response.status);
    });
  });

  chrome.extension.onRequest.addListener(
    function(request, sender, sendResponse) {
      if (request.save_sunglasses_opacity != null) {
        sunglasses_opacity = request.save_sunglasses_opacity;
        sendResponse({status: "sunglasses_opacity saved succesfully with value " + sunglasses_opacity});
      } else {
        sendResponse({status: "sunglasses_opacity did not save"});
      }
    });
  
  </script>
</html>

